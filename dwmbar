delim="|"

status() {
	# Get the volume of ALSA's master volume output.
	amixer get Master | grep -o "[0-9]*%\|\[on\]\|\[off\]" | sed "s/\[on\]/unmuted/;s/\[off\]/muted/"
	echo "$delim"

	echo "$(weather)"
	echo "$delim"
	
	echo $(date "+%F %R")
	echo "$delim"
	
	echo "$(battery)"
}

update_bar() {
	xsetroot -name "$(status | tr '\n' ' ')" &
	wait
}

while :; do
	update_bar
	sleep 60s &
	wait
done
